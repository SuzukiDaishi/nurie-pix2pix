(function(t){function e(e){for(var a,o,c=e[0],s=e[1],u=e[2],v=0,f=[];v<c.length;v++)o=c[v],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"7b82":function(t,e,n){"use strict";var a=n("ad37"),r=n.n(a);r.a},"9c0c":function(t,e,n){},ad37:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("NurieView",{attrs:{modelPath:"/jsmodel/model.json"}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",[t._v(" 勝手にぬりえ ")])])}],o=n("d4ec"),c=n("262e"),s=n("2caf"),u=n("9ab4"),l=n("60a3"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nurie-view"},[n("button",{staticClass:"nurie-view_load-button",on:{click:t.onClick}},[t._v(" "+t._s(t.generaterModel?"モデル読み込み済み":"モデル読み込み")+" ")]),n("button",{staticClass:"nurie-view_load-button",on:{click:t.convertImage}},[t._v(" 変換 ")]),n("button",{staticClass:"nurie-view_load-button",on:{click:t.onClickLoadModel}},[t._v(" ポケモン書き込み ")]),n("div",{staticClass:"nurie-view_edits"},[n("div",[n("canvas",{ref:"srcCanvas",staticClass:"nurie-view_canvas",attrs:{width:"256px",height:"256px"},on:{mousemove:t.canvasDraw,mousedown:t.canvasDragStart,mouseup:t.canvasDragEnd,mouseout:t.canvasDragEnd}})]),n("div",[n("canvas",{ref:"distCanvas",staticClass:"nurie-view_canvas",attrs:{width:"256px",height:"256px"}})])])])},f=[],h=(n("96cf"),n("1da1")),d=n("bee2"),p=n("ce1a"),b=function(t){Object(c["a"])(n,t);var e=Object(s["a"])(n);function n(){var t;return Object(o["a"])(this,n),t=e.apply(this,arguments),t.generaterModel=null,t.canvas=null,t.ctx=null,t.isDrag=!1,t.outCanvas=null,t.outCtx=null,t}return Object(d["a"])(n,[{key:"mounted",value:function(){this.canvasInit(),this.outCanvasInit()}},{key:"onClick",value:function(){this.generaterModel||this.loadModel(this.modelPath)}},{key:"onClickLoadModel",value:function(){this.loadImage("/examples/edges/001.png")}},{key:"loadModel",value:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["b"](e);case 3:this.generaterModel=t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"canvasInit",value:function(){this.canvas=this.$refs.srcCanvas,this.ctx=this.canvas.getContext("2d"),this.ctx&&(this.ctx.fillStyle="white",this.ctx.fillRect(0,0,256,256))}},{key:"outCanvasInit",value:function(){this.outCanvas=this.$refs.distCanvas,this.outCtx=this.outCanvas.getContext("2d")}},{key:"canvasDraw",value:function(t){var e=t.offsetX,n=t.offsetY;this.isDrag&&this.ctx&&(this.ctx.lineTo(e,n),this.ctx.stroke())}},{key:"canvasDragStart",value:function(t){var e=t.offsetX,n=t.offsetY;this.ctx&&(this.ctx.beginPath(),this.ctx.lineTo(e,n),this.ctx.stroke()),this.isDrag=!0}},{key:"canvasDragEnd",value:function(t){this.ctx&&this.ctx.closePath(),this.isDrag=!1}},{key:"loadImage",value:function(t){var e=this,n=new Image;n.src=t,n.onload=function(){e.ctx&&e.ctx.drawImage(n,0,0)}}},{key:"convertImage",value:function(){if(this.canvas&&this.ctx&&this.generaterModel){var t=this.ctx.getImageData(0,0,256,256),e=p["a"].fromPixels(t,1).reshape([1,256,256,1]).div(255),n=this.generaterModel.predict(e).reshape([256,256,3]).mul(255),a=this.toPixels(n);this.outCtx&&this.outCtx.putImageData(a,0,0)}}},{key:"toPixels",value:function(t){for(var e=t.dataSync(),n=new ImageData(t.shape[0],t.shape[1]),a=0;a<e.length/3;a++)n.data[4*a+0]=e[3*a+0],n.data[4*a+1]=e[3*a+1],n.data[4*a+2]=e[3*a+2],n.data[4*a+3]=255;return n}}]),n}(l["c"]);Object(u["a"])([Object(l["b"])()],b.prototype,"modelPath",void 0),b=Object(u["a"])([l["a"]],b);var g=b,x=g,m=(n("7b82"),n("2877")),y=Object(m["a"])(x,v,f,!1,null,null,null),w=y.exports,j=function(t){Object(c["a"])(n,t);var e=Object(s["a"])(n);function n(){return Object(o["a"])(this,n),e.apply(this,arguments)}return n}(l["c"]);j=Object(u["a"])([Object(l["a"])({components:{NurieView:w}})],j);var k=j,C=k,O=(n("5c0b"),Object(m["a"])(C,r,i,!1,null,null,null)),_=O.exports;a["a"].config.productionTip=!0,new a["a"]({render:function(t){return t(_)}}).$mount("#app")}});
//# sourceMappingURL=app.e3fc4ab9.js.map